/* --- Base Setup & Typography --- */
:root {
    --font-primary: 'Sora', sans-serif;
    --bg-color: #0c0a1d;
    --primary-glow: #a78bfa;
    --secondary-glow: #7dd3fc;
    --accent-glow: #4ade80;
    --text-primary: #e0e7ff;
    --text-secondary: #a8b2d1;
    --glass-bg: rgba(20, 18, 38, 0.5);
    --glass-border: rgba(167, 139, 250, 0.2);
    --shadow-color: rgba(167, 139, 250, 0.1);
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: var(--font-primary); background-color: var(--bg-color); color: var(--text-primary); overflow: hidden; -webkit-font-smoothing: antialiased; }

/* --- Ethereal Background --- */
.aurora-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; overflow: hidden; }
.aurora-shape { position: absolute; border-radius: 50%; filter: blur(120px); opacity: 0.3; transition: transform 0.5s ease-out; }
.shape1 { width: 600px; height: 600px; background: var(--primary-glow); top: -150px; left: -200px; animation: move1 25s infinite alternate ease-in-out; }
.shape2 { width: 500px; height: 500px; background: var(--secondary-glow); bottom: -100px; right: -150px; animation: move2 30s infinite alternate ease-in-out; }
.shape3 { width: 400px; height: 400px; background: var(--accent-glow); bottom: 50px; left: 50px; animation: move3 20s infinite alternate ease-in-out; }
@keyframes move1 { from { transform: translate(0, 0) rotate(0deg); } to { transform: translate(100px, 50px) rotate(45deg); } }
@keyframes move2 { from { transform: translate(0, 0) rotate(0deg); } to { transform: translate(-80px, -40px) rotate(-60deg); } }
@keyframes move3 { from { transform: translate(40px, -60px) scale(1.2); } to { transform: translate(0, 0) scale(1); } }
.stars-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
.star { position: absolute; background-color: white; border-radius: 50%; animation-name: twinkle; animation-timing-function: ease-in-out; animation-iteration-count: infinite; }
@keyframes twinkle { 0%, 100% { opacity: 0.2; } 50% { opacity: 0.8; } }
.comet { position: absolute; width: 4px; height: 4px; background-color: rgba(255, 255, 255, 0.8); border-radius: 50%; box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8); pointer-events: none; animation-name: comet-streak; animation-timing-function: linear; animation-iteration-count: 1; }
@keyframes comet-streak { 0% { transform: translate(0, 0); opacity: 1; } 100% { transform: translate(-100vw, 100vh); opacity: 0; } }

/* --- Glass UI & Buttons --- */
.glass-ui { background: var(--glass-bg); border: 1px solid var(--glass-border); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border-radius: 20px; box-shadow: 0 8px 32px 0 var(--shadow-color); transition: all 0.3s ease; }
.primary-btn { padding: 14px 20px; background: linear-gradient(135deg, var(--accent-glow), #2a9d4a); border: none; border-radius: 12px; color: #fff; font-family: var(--font-primary); font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
.primary-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(74, 222, 128, 0.2); }
.primary-btn:disabled { background: #555; cursor: not-allowed; opacity: 0.7; }

/* --- Login Screen --- */
.login-container { position: fixed; inset: 0; display: flex; justify-content: center; align-items: center; z-index: 100; transition: opacity 0.5s ease, visibility 0.5s; }
.login-content { text-align: center; padding: 40px; width: 90%; max-width: 400px; display: flex; flex-direction: column; gap: 20px; }
.login-title { font-size: 3rem; font-weight: 700; background: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow)); -webkit-background-clip: text; color: transparent; }
.login-subtitle { font-size: 1rem; color: var(--text-secondary); margin-top: -10px; }
.input-wrapper input { width: 100%; padding: 14px 20px; background: rgba(0,0,0,0.2); border: 1px solid var(--glass-border); border-radius: 12px; color: var(--text-primary); font-family: var(--font-primary); font-size: 1rem; text-align: center; transition: all 0.3s ease; }
.input-wrapper input:focus { outline: none; border-color: var(--primary-glow); box-shadow: 0 0 15px var(--shadow-color); }

/* --- Main App Layout --- */
.app-container { max-width: 500px; margin: 0 auto; padding: 24px; display: flex; flex-direction: column; gap: 24px; min-height: 100vh; }
.app-header { display: flex; justify-content: space-between; align-items: center; }
.welcome-user h2 { font-size: 1.5rem; font-weight: 600; }
.welcome-user p { font-size: 0.9rem; color: var(--text-secondary); margin: 0; }
.user-stats { display: flex; align-items: center; gap: 12px; }
.stat-item { display: flex; align-items: baseline; gap: 4px; font-weight: 600; }
.stat-item strong { font-size: 1.2rem; color: var(--primary-glow); }
.xp-bar-container { display: flex; flex-direction: column; align-items: flex-end; gap: 4px; }
.xp-bar { width: 100px; height: 6px; background: rgba(0,0,0,0.3); border-radius: 3px; overflow: hidden; }
.xp-fill { width: 50%; height: 100%; background: linear-gradient(90deg, var(--secondary-glow), var(--primary-glow)); border-radius: 3px; transition: width 0.5s ease; }
.xp-label { font-size: 0.7rem; color: var(--text-secondary); }

/* --- Sanctuary Focus & Feature Grid --- */
.sanctuary-focus { padding: 24px; text-align: center; }
.daily-quote { font-size: 1rem; line-height: 1.6; margin: 0; color: var(--text-secondary); }
.mood-display { margin-top: 16px; font-size: 0.9rem; color: var(--text-secondary); }
.mood-display strong { color: var(--primary-glow); font-weight: 600; }
.feature-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); gap: 16px; }
.orb-container { display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer; }
.orb { width: 70px; height: 70px; display: flex; justify-content: center; align-items: center; border-radius: 16px; }
.orb:hover { transform: translateY(-4px); border-color: var(--primary-glow); box-shadow: 0 10px 20px var(--shadow-color); }
.orb-icon { font-size: 1.8rem; }
.orb-label { font-size: 0.75rem; font-weight: 400; color: var(--text-secondary); transition: color 0.3s ease; }
.orb-container:hover .orb-label { color: var(--text-primary); }

/* --- Modal --- */
.modal-backdrop { position: fixed; inset: 0; background: rgba(12, 10, 29, 0.7); backdrop-filter: blur(8px); display: flex; justify-content: center; align-items: center; z-index: 200; transition: opacity 0.3s ease, visibility 0.3s; }
.modal-content { width: 90%; max-width: 500px; max-height: 90vh; display: flex; flex-direction: column; overflow: hidden; }
.modal-header { display: flex; justify-content: space-between; align-items: center; padding: 20px 24px; border-bottom: 1px solid var(--glass-border); }
.modal-title-text { font-size: 1.2rem; font-weight: 600; }
.close-btn { background: none; border: none; font-size: 1.8rem; color: var(--text-secondary); cursor: pointer; transition: color 0.3s ease, transform 0.3s ease; }
.close-btn:hover { color: var(--text-primary); transform: rotate(90deg); }
.modal-body-content { padding: 24px; overflow-y: auto; }

/* --- Toast Notification --- */
.toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); padding: 12px 24px; background: linear-gradient(135deg, var(--accent-glow), #2a9d4a); border-radius: 10px; color: #fff; font-weight: 600; font-size: 0.9rem; box-shadow: 0 5px 15px rgba(74, 222, 128, 0.2); z-index: 300; transition: opacity 0.3s, transform 0.3s; }

/* --- Feature-Specific Styles --- */
.breathing-container { display: flex; flex-direction: column; align-items: center; text-align: center; gap: 20px; }
.breathing-orb { width: 180px; height: 180px; border-radius: 50%; background: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow)); display: flex; justify-content: center; align-items: center; transition: transform 4s ease-in-out; box-shadow: 0 0 40px var(--shadow-color); }
.breathing-orb.inhale { transform: scale(1.2); }
.breathing-orb.exhale { transform: scale(0.8); }
.breathing-text { font-size: 1.5rem; font-weight: 600; color: var(--bg-color); }
.breathing-patterns { width: 100%; display: flex; flex-direction: column; gap: 10px; }
.breathing-pattern-btn { width: 100%; padding: 12px; background: rgba(0,0,0,0.2); border: 1px solid var(--glass-border); color: var(--text-primary); border-radius: 10px; font-family: var(--font-primary); font-size: 0.9rem; cursor: pointer; transition: all 0.3s ease; }
.breathing-pattern-btn:hover { background: var(--primary-glow); color: #fff; border-color: var(--primary-glow); }
.mood-options { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
.mood-btn { padding: 15px; background: rgba(0,0,0,0.2); border: 1px solid var(--glass-border); border-radius: 15px; cursor: pointer; transition: all 0.3s ease; font-size: 2rem; }
.mood-btn:hover { transform: translateY(-3px); border-color: var(--primary-glow); }
.chat-container { display: flex; flex-direction: column; height: 60vh; max-height: 500px; gap: 15px; }
.chat-messages { flex: 1; overflow-y: auto; padding: 10px; background: rgba(0, 0, 0, 0.2); border-radius: 15px; display: flex; flex-direction: column; gap: 10px; }
.chat-message { max-width: 80%; padding: 10px 15px; border-radius: 18px; line-height: 1.5; animation: fadeIn 0.3s ease; }
.chat-message.user { background: var(--primary-glow); color: #fff; align-self: flex-end; border-bottom-right-radius: 4px; }
.chat-message.ai { background: rgba(255, 255, 255, 0.1); align-self: flex-start; border-bottom-left-radius: 4px; }
.chat-input-container { display: flex; gap: 10px; align-items: center; }
.chat-input { flex-grow: 1; padding: 14px 20px; background: rgba(0,0,0,0.2); border: 1px solid var(--glass-border); border-radius: 12px; color: var(--text-primary); font-family: var(--font-primary); font-size: 1rem; transition: all 0.3s ease; }
.chat-input:focus { outline: none; border-color: var(--primary-glow); }
.modal-body-content label { display: block; margin-top: 16px; margin-bottom: 8px; color: var(--text-secondary); font-size: 0.9rem; }
.modal-body-content input[type="text"], .modal-body-content select, .modal-body-content input[type="time"] { width: 100%; padding: 12px; background: rgba(0,0,0,0.2); border: 1px solid var(--glass-border); border-radius: 10px; color: var(--text-primary); font-family: var(--font-primary); font-size: 1rem; }
.modal-body-content button.primary-btn { width: 100%; margin-top: 24px; }
.fade-in { animation: fadeIn 0.5s ease forwards; }
.fade-out { animation: fadeOut 0.5s ease forwards; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeOut { from { opacity: 1; } to { opacity: 0; visibility: hidden; } }